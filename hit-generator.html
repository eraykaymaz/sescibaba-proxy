<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ðŸ”¥ Hit Generator â€“ Otomatik ÃœrÃ¼n Ã‡ekme</title>

<style>
    body {
        background:#0c0c0e;
        color:#fff;
        font-family: Arial;
        padding:20px;
    }
    table {
        width:100%;
        border-collapse: collapse;
        margin-top:20px;
    }
    th, td {
        border:1px solid #333;
        padding:10px;
        font-size:14px;
    }
    input {
        width:100%;
        padding:7px;
        background:#1a1a1a;
        border:1px solid #444;
        color:#fff;
    }
</style>

</head>
<body>

<h1>ðŸ”¥ Hit Generator â€“ Otomatik ÃœrÃ¼n Ã‡ekme</h1>

<b>HTML Proxy:</b>  
<span style="color:#58a6ff">https://test.eray-kaymaz.workers.dev/?url=</span>

<table>
    <thead>
        <tr>
            <th>#</th>
            <th>ÃœrÃ¼n Linki</th>
            <th>ÃœrÃ¼n AdÄ±</th>
            <th>Resim URL</th>
            <th>Fiyat</th>
        </tr>
    </thead>
    <tbody id="rows">
        <!-- 15 satÄ±r -->
        <script>
            for (let i = 1; i <= 15; i++) {
                document.write(`
                <tr>
                    <td>${i}</td>
                    <td><input class="url" placeholder="ÃœrÃ¼n linki"></td>
                    <td><input class="name"></td>
                    <td><input class="img"></td>
                    <td><input class="price"></td>
                </tr>
                `);
            }
        </script>
    </tbody>
</table>

<script>
// -----------------------------
//  ÃœRÃœN VERÄ°SÄ° Ã‡EKME MOTORU
// -----------------------------
async function fetchProduct(url){
    try {
        const proxyUrl = "https://test.eray-kaymaz.workers.dev/?url=" + encodeURIComponent(url);

        const html = await fetch(proxyUrl).then(r => r.text());

        // DOM parser
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        // ÃœrÃ¼n baÅŸlÄ±ÄŸÄ±
        const title = doc.querySelector("#product-title")?.innerText.trim() || "BulunamadÄ±";

        // ÃœrÃ¼n resim
        const img = doc.querySelector("img[data-image]")?.src
                 || doc.querySelector(".swiper-slide img")?.src
                 || "BulunamadÄ±";

        // Fiyat
        let price = doc.querySelector(".product-price")?.innerText.trim();
        if (!price) price = "BulunamadÄ±";

        return { title, img, price };

    } catch (e) {
        return { title:"Hata", img:"Hata", price:"Hata" };
    }
}

// -----------------------------
//  OTOMATÄ°K DOLDURMA
// -----------------------------
document.querySelectorAll(".url").forEach((input, index) => {
    input.addEventListener("change", async () => {

        const url = input.value.trim();
        if (!url) return;

        // SatÄ±r elemanlarÄ±nÄ± bul
        const row = input.parentElement.parentElement;
        const nameField = row.querySelector(".name");
        const imgField  = row.querySelector(".img");
        const priceField = row.querySelector(".price");

        // YÃ¼kleniyor gÃ¶stergesi
        nameField.value = "YÃ¼kleniyor...";
        imgField.value = "YÃ¼kleniyor...";
        priceField.value = "YÃ¼kleniyor...";

        // Verileri Ã§ek
        const data = await fetchProduct(url);

        // Doldur
        nameField.value = data.title;
        imgField.value = data.img;
        priceField.value = data.price;
    });
});
</script>

</body>
</html>
