<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Hit Generator</title>
<style>
body { background:#0f1115; color:#fff; font-family:Arial; padding:20px; }
h1 { text-align:center; margin-bottom:20px; color:#ff4d6d; }
table { width:100%; border-collapse:collapse; margin-bottom:20px; }
table th, table td { border:1px solid #333; padding:8px; font-size:14px; }
input { width:100%; padding:6px; background:#1a1d23; color:#fff; border:1px solid #333; }
button { padding:10px 18px; background:#ff4d6d; border:none; cursor:pointer; color:#fff; font-weight:bold; border-radius:6px; }
button:hover { background:#ff6b85; }
textarea { width:100%; height:250px; background:#111317; color:#00ff9c; padding:10px; font-size:13px; border:none; }
.small { font-size:12px; opacity:0.7; margin-top:5px; }
</style>
</head>
<body>

<h1>ðŸ”¥ Hit Generator (111 Kategori Ä°Ã§in)</h1>

<p>ðŸ”— Backend Proxy: <b>https://sescibaba-proxy.vercel.app/api/fetch?url=</b></p>

<table id="hitTable">
<thead>
<tr>
<th>#</th>
<th>ÃœrÃ¼n Linki</th>
<th>ÃœrÃ¼n AdÄ± (Auto)</th>
<th>Resim URL (Auto)</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

<button onclick="generateHit()">Hit.html OluÅŸtur</button>

<h3>ðŸ“„ OluÅŸturulan hit.html KodlarÄ±:</h3>
<textarea id="output" readonly></textarea>
<p class="small">HazÄ±r olunca bu Ã§Ä±ktÄ±yÄ± kopyalayÄ±p hit.html dosyasÄ±na yapÄ±ÅŸtÄ±racaksÄ±n.</p>

<script>
// 111 satÄ±r oluÅŸtur
const tbody = document.querySelector("#hitTable tbody");
for (let i = 1; i <= 111; i++) {
    const tr = document.createElement("tr");
    tr.innerHTML = `
        <td>${i}</td>
        <td><input class="link"></td>
        <td><input class="name"></td>
        <td><input class="img"></td>
    `;
    tbody.appendChild(tr);
}

// Otomatik veri Ã§ekme (Ã¼rÃ¼n adÄ± + resim)
document.addEventListener("input", async e => {
    if (!e.target.classList.contains("link")) return;
    const link = e.target.value.trim();
    if (!link.startsWith("http")) return;

    const row = e.target.parentElement.parentElement;
    const nameInput = row.querySelector(".name");
    const imgInput = row.querySelector(".img");

    const proxyURL = "https://sescibaba-proxy.vercel.app/api/fetch?url=" + encodeURIComponent(link);

    nameInput.value = "YÃ¼kleniyor...";
    imgInput.value = "YÃ¼kleniyor...";

    try {
        const html = await fetch(proxyURL).then(r => r.text());

        // ÃœrÃ¼n adÄ± bulma (Ticimax genelde <h1> kullanÄ±r)
        const nameMatch = html.match(/<h1[^>]*>(.*?)<\/h1>/i);
        if (nameMatch) nameInput.value = nameMatch[1].trim();

        // ÃœrÃ¼n gÃ¶rseli
        const imgMatch = html.match(/<img[^>]+src="([^"]+)"[^>]*class="product-detail-image"/i)
                      || html.match(/<img[^>]+src="([^"]+)"[^>]*product-image/i)
                      || html.match(/<img[^>]+src="([^"]+)"/i);

        if (imgMatch) imgInput.value = imgMatch[1];
    }
    catch(err){
        nameInput.value = "HATA";
        imgInput.value = "HATA";
    }
});

// Hit.html Ã¼retme
function generateHit() {
    let html = `<div class="hit-list">\n`;

    document.querySelectorAll("#hitTable tbody tr").forEach(tr => {
        const link = tr.querySelector(".link").value.trim();
        const name = tr.querySelector(".name").value.trim();
        const img  = tr.querySelector(".img").value.trim();

        html += `<div class="urun" data-link="${link}" data-img="${img}" data-name="${name}"></div>\n`;
    });

    html += `</div>`;
    document.querySelector("#output").value = html;
}

</script>
</body>
</html>
