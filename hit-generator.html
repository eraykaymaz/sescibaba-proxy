<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Hit Generator</title>
<style>
body { background:#0f1115; color:#fff; font-family:Arial; padding:20px; }
h1 { text-align:center; margin-bottom:20px; color:#ff4d6d; }
table { width:100%; border-collapse:collapse; margin-bottom:20px; }
table th, table td { border:1px solid #333; padding:8px; font-size:14px; }
input { width:100%; padding:6px; background:#1a1d23; color:#fff; border:1px solid #333; }
button { padding:10px 18px; background:#ff4d6d; border:none; cursor:pointer; color:#fff; font-weight:bold; border-radius:6px; }
button:hover { background:#ff6b85; }
textarea { width:100%; height:250px; background:#111317; color:#00ff9c; padding:10px; font-size:13px; border:none; }
.small { font-size:12px; opacity:0.7; margin-top:5px; }
</style>
</head>
<body>

<h1>ðŸ”¥ Hit Generator â€“ 111 Kategori Ä°Ã§in Otomatik ÃœrÃ¼n Ã‡ekme</h1>

<p>ðŸ”— Backend: <b>https://sescibaba-proxy.vercel.app/api/fetch-browser?url=</b></p>

<table id="hitTable">
<thead>
<tr>
<th>#</th>
<th>ÃœrÃ¼n Linki</th>
<th>ÃœrÃ¼n AdÄ± (Auto)</th>
<th>Resim URL (Auto)</th>
<th>Fiyat (Auto)</th>
</tr>
</thead>
<tbody></tbody>
</table>

<button onclick="generateHit()">Hit.html OluÅŸtur</button>

<h3>ðŸ“„ OluÅŸturulan hit.html Ä°Ã§eriÄŸi:</h3>
<textarea id="output" readonly></textarea>
<p class="small">Bu Ã§Ä±ktÄ±yÄ± kopyalayÄ±p GitHubâ€™daki hit.html dosyasÄ±na yapÄ±ÅŸtÄ±racaksÄ±n.</p>


<script>
// -----------------------------
// 111 SATIR OLUÅžTUR
// -----------------------------
const tbody = document.querySelector("#hitTable tbody");
for (let i = 1; i <= 111; i++) {
    const tr = document.createElement("tr");
    tr.innerHTML = `
        <td>${i}</td>
        <td><input class="link"></td>
        <td><input class="name"></td>
        <td><input class="img"></td>
        <td><input class="price"></td>
    `;
    tbody.appendChild(tr);
}


// ----------------------------------------
// OTOMATÄ°K VERÄ° Ã‡EKME (ÃœrÃ¼n AdÄ± + Resim + Fiyat)
// ----------------------------------------
document.addEventListener("input", async e => {
    if (!e.target.classList.contains("link")) return;

    const link = e.target.value.trim();
    if (!link.startsWith("http")) return;

    const row = e.target.parentElement.parentElement;

    const nameInput  = row.querySelector(".name");
    const imgInput   = row.querySelector(".img");
    const priceInput = row.querySelector(".price");

    const proxyURL = "https://sescibaba-proxy.vercel.app/api/fetch-browser?url=" + encodeURIComponent(link);

    nameInput.value  = "YÃ¼kleniyor...";
    imgInput.value   = "YÃ¼kleniyor...";
    priceInput.value = "YÃ¼kleniyor...";

    try {
        const html = await fetch(proxyURL).then(r => r.text());

        // âœ” ÃœrÃ¼n BaÅŸlÄ±ÄŸÄ± (Ticimax)
        const titleMatch = html.match(/<h1[^>]*id="product-title"[^>]*>(.*?)<\/h1>/i);
        nameInput.value = titleMatch ? titleMatch[1].trim() : "BulunamadÄ±";

        // âœ” Ana GÃ¶rsel (O.webp)
        const imgMatch = html.match(/<img[^>]+src="(https:\/\/www\.sescibaba\.com[^"]+O\.webp)"[^>]*>/i);
        imgInput.value = imgMatch ? imgMatch[1] : "BulunamadÄ±";

        // âœ” Fiyat
        const priceMatch = html.match(/<span[^>]*class="product-price"[^>]*>(.*?)<\/span>/i);
        priceInput.value = priceMatch ? priceMatch[1].trim() + " TL" : "BulunamadÄ±";

    } catch(err) {
        nameInput.value  = "HATA";
        imgInput.value   = "HATA";
        priceInput.value = "HATA";
    }
});


// ----------------------------------------
// hit.html HTML KODUNU ÃœRET
// ----------------------------------------
function generateHit() {
    let html = `<div class="hit-list">\n`;

    document.querySelectorAll("#hitTable tbody tr").forEach(tr => {
        const link  = tr.querySelector(".link").value.trim();
        const name  = tr.querySelector(".name").value.trim();
        const img   = tr.querySelector(".img").value.trim();
        const price = tr.querySelector(".price").value.trim();

        html += `<div class="urun" data-link="${link}" data-name="${name}" data-img="${img}" data-price="${price}"></div>\n`;
    });

    html += `</div>`;

    document.querySelector("#output").value = html;
}
</script>

</body>
</html>
