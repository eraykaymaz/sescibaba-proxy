<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ðŸ”¥ Hit Generator â€“ Otomatik ÃœrÃ¼n Ã‡ekme</title>

<style>
    body { background:#111; color:white; font-family:Arial; padding:20px; }
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    td, th { border:1px solid #444; padding:8px; text-align:left; }
    input { width:100%; padding:6px; background:#222; color:white; border:1px solid #555; }
    .header { font-size:30px; margin-bottom:20px; text-align:center; color:#ff355b; }
</style>
</head>

<body>

<div class="header">ðŸ”¥ Hit Generator â€“ Otomatik ÃœrÃ¼n Ã‡ekme</div>

<b style="color:#7cf;">HTML Proxy:</b>  
https://test.eray-kaymaz.workers.dev/?url=

<table>
<thead>
<tr>
    <th>#</th>
    <th>ÃœrÃ¼n Linki</th>
    <th>ÃœrÃ¼n AdÄ±</th>
    <th>Resim URL</th>
    <th>Fiyat</th>
</tr>
</thead>

<tbody id="rows"></tbody>
</table>

<script>
/* ==========================================================
   ðŸŒŸ Cloudflare Worker â†’ DOMParser â†’ Sescibaba Ã¼rÃ¼n parse
   ========================================================== */
async function fetchProduct(url) {
    try {
        const proxy = "https://test.eray-kaymaz.workers.dev/?url=" + encodeURIComponent(url);

        const response = await fetch(proxy);
        const html = await response.text();

        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        // ÃœRÃœN ADI
        const title =
            doc.querySelector("#product-title")?.textContent.trim() ||
            "BulunamadÄ±";

        // FÄ°YAT
        const price =
            doc.querySelector(".product-price")?.textContent.trim() ||
            "BulunamadÄ±";

        // RESÄ°M
        const image =
            doc.querySelector("#gallery-01 img")?.getAttribute("src") ||
            doc.querySelector(".product-detail-images img")?.src ||
            doc.querySelector("img")?.src ||
            "BulunamadÄ±";

        return { title, image, price };

    } catch (error) {
        return {
            title: "Hata",
            image: "Hata",
            price: "Hata"
        };
    }
}

/* ============================================
   ðŸŒŸ Tabloyu oluÅŸtur (111 satÄ±r)
   ============================================ */
function createTable() {
    let table = "";
    for (let i = 1; i <= 111; i++) {
        table += `
        <tr>
            <td>${i}</td>
            <td><input id="url_${i}" placeholder="ÃœrÃ¼n linki"></td>
            <td><input id="title_${i}" readonly></td>
            <td><input id="image_${i}" readonly></td>
            <td><input id="price_${i}" readonly></td>
        </tr>
        `;
    }
    document.getElementById("rows").innerHTML = table;

    // Her URL inputuna deÄŸiÅŸiklik dinleyicisi ekle
    for (let i = 1; i <= 111; i++) {
        document.getElementById("url_" + i).addEventListener("change", () => loadProduct(i));
    }
}

/* ============================================
   ðŸŒŸ Tek satÄ±r Ã¼rÃ¼nÃ¼ Ã§ek
   ============================================ */
async function loadProduct(row) {
    const url = document.getElementById("url_" + row).value.trim();
    if (!url) return;

    document.getElementById("title_" + row).value = "YÃ¼kleniyor...";
    document.getElementById("image_" + row).value = "";
    document.getElementById("price_" + row).value = "";

    const data = await fetchProduct(url);

    document.getElementById("title_" + row).value = data.title;
    document.getElementById("image_" + row).value = data.image;
    document.getElementById("price_" + row).value = data.price;
}

createTable();
</script>

</body>
</html>
